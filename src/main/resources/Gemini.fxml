<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.*?>
<?import javafx.scene.text.*?>
<?import javafx.scene.effect.*?>
<?import javafx.scene.paint.*?>
<?import javafx.scene.shape.*?>

<AnchorPane xmlns:fx="http://javafx.com/fxml/1" fx:controller="controllers.GeminiController"
            style="-fx-background-color: linear-gradient(to bottom, #f5f9ff, #e6f2ff);">

    <!-- Main Container -->
    <VBox spacing="20" alignment="TOP_CENTER" style="-fx-padding: 30; -fx-background-color: transparent;"
          AnchorPane.topAnchor="0" AnchorPane.bottomAnchor="0" AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0">

        <!-- Header with animation -->
        <HBox alignment="CENTER" spacing="10" style="
              -fx-background-color: rgba(255,255,255,0.3);
              -fx-background-radius: 20;
              -fx-border-radius: 20;
              -fx-padding: 20;
              -fx-border-width: 1;
              -fx-border-color: rgba(255,255,255,0.5);
              -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 10, 4, 0, 4);">

            <Text text="ðŸ¤–" style="-fx-font-size: 28px; -fx-font-family: 'Segoe UI Emoji';"/>

            <Label text="Assistant COVOITMOB" style="
                   -fx-font-size: 24px;
                   -fx-font-weight: bold;
                   -fx-text-fill: linear-gradient(to right, #005288, #3b82f6);
                   -fx-font-family: 'Segoe UI', sans-serif;"/>
        </HBox>

        <!-- Chat Area with scroll -->
        <StackPane>
            <Rectangle arcWidth="20" arcHeight="20" fill="#e6f2ff"
                       width="650" height="400"
                       style="-fx-stroke: linear-gradient(to bottom, #3b82f6, #2563eb);
                              -fx-stroke-width: 2;"/>

            <ScrollPane fitToWidth="true" fitToHeight="true" style="-fx-background: transparent; -fx-background-color: transparent;">
                <TextArea fx:id="chatArea" wrapText="true" editable="false"
                          style="
                            -fx-font-size: 14px;
                            -fx-text-fill: #333333;
                            -fx-background-color: transparent;
                            -fx-control-inner-background: #e6f2ff;
                            -fx-background-insets: 0;
                            -fx-padding: 15;"
                          prefWidth="650" prefHeight="400"/>
            </ScrollPane>
        </StackPane>

        <!-- Input Area with send button -->
        <HBox spacing="15" alignment="CENTER" style="
              -fx-background-color: rgba(255,255,255,0.7);
              -fx-background-radius: 15;
              -fx-padding: 15;">

            <TextField fx:id="userInput" promptText="Posez votre question sur le covoiturage..."
                       style="
                        -fx-font-size: 14px;
                        -fx-background-color: white;
                        -fx-background-radius: 10;
                        -fx-border-radius: 10;
                        -fx-padding: 12 20;
                        -fx-border-color: rgba(0,82,136,0.2);
                        -fx-text-fill: #005288;
                        -fx-prompt-text-fill: rgba(0,82,136,0.4);"
                       prefWidth="500">
                <effect>
                    <InnerShadow color="rgba(0,82,136,0.1)" radius="5"/>
                </effect>
            </TextField>

            <Button text="Envoyer" onAction="#handleSendMessage"
                    style="
                        -fx-font-size: 16px;
                        -fx-font-weight: bold;
                        -fx-text-fill: white;
                        -fx-background-radius: 10;
                        -fx-padding: 12 30;
                        -fx-cursor: hand;
                        -fx-background-color: linear-gradient(to right, #3b82f6, #2563eb);">
                <effect>
                    <DropShadow color="#3b82f6" radius="10"/>
                </effect>
                <opaqueInsets>
                    <Insets/>
                </opaqueInsets>
            </Button>
        </HBox>

        <!-- Hint text -->
        <Label text="Essayez des questions comme 'bonjour', 'aide' ou 'covoiturage'"
               style="-fx-text-fill: #5a6c84; -fx-font-style: italic;"/>
    </VBox>
</AnchorPane>