<?xml version="1.0" encoding="UTF-8"?>

<?import java.net.URL?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.MenuButton?>
<?import javafx.scene.control.MenuItem?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Pane?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.effect.DropShadow?>

<BorderPane style="-fx-background-color: white;" prefHeight="800.0" prefWidth="1000.0"
            xmlns="http://javafx.com/javafx" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="controllers.AjouterOffreController">
   <stylesheets>
      <URL value="@/styles/forms2.css" />
   </stylesheets>

   <!-- Navigation Bar in Top Region -->
   <top>
      <HBox spacing="30" alignment="TOP_LEFT" style="-fx-background-color: linear-gradient(to right, #c9eaff, #eaf6ff); -fx-padding: 15; -fx-border-width: 0 0 2 0; -fx-border-color: #b3d1f5; -fx-background-radius: 12; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 10, 0, 0, 4);">
         <Label text="🚗 COVOITMOB" style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #002244; -fx-font-family: 'Segoe UI', sans-serif;" />
         <Pane HBox.hgrow="ALWAYS"/>
         <HBox spacing="20" alignment="CENTER">
            <MenuButton text="🚙 Offres" style="-fx-background-color: rgba(255,255,255,0.6); -fx-text-fill: #002557; -fx-font-size: 17px; -fx-font-weight: bold; -fx-background-radius: 10; -fx-padding: 10 18;">
               <items>
                  <MenuItem fx:id="mesOffresItem" text="📄 Mes offres" style="-fx-font-size: 16px; -fx-text-fill: #002244;" onAction="#handleMesOffres" />
                  <MenuItem fx:id="autresOffresItem" text="🌐 Les offres des autres" style="-fx-font-size: 16px; -fx-text-fill: #002244;" onAction="#handleAutresOffres" />
               </items>
            </MenuButton>
            <Button fx:id="ajouterButton" text="➕ Ajouter" style="-fx-background-color: #005288; -fx-text-fill: #ffffff; -fx-font-size: 17px; -fx-font-weight: bold; -fx-background-radius: 10; -fx-padding: 10 20;" onAction="#handleAjouterAction">
               <effect>
                  <DropShadow color="#a0c4ff" radius="6"/>
               </effect>
            </Button>
            <Button text="📋 Listes" onAction="#handleListeAction" style="-fx-background-color: rgba(255,255,255,0.6); -fx-text-fill: #002244; -fx-font-size: 17px; -fx-font-weight: bold; -fx-background-radius: 10; -fx-padding: 10 20;">
               <effect>
                  <DropShadow color="#d0e5ff" radius="4"/>
               </effect>
            </Button>
            <Button fx:id="listeVehicules" text="Liste Vehicules" style="-fx-background-color: #005288; -fx-text-fill: #ffffff; -fx-font-size: 17px; -fx-font-weight: bold; -fx-background-radius: 10; -fx-padding: 10 20;" onAction="#handleListeVehicules">
               <effect>
                  <DropShadow color="#a0c4ff" radius="6"/>
               </effect>
            </Button>
            <MenuButton text="👤 Utilisateur" style="-fx-background-color: rgba(255,255,255,0.6); -fx-text-fill: #002244; -fx-font-size: 17px; -fx-font-weight: bold; -fx-background-radius: 10; -fx-padding: 10 18;">
               <items>
                  <MenuItem text="📝 Profile" onAction="#handleProfile" style="-fx-font-size: 16px; -fx-text-fill: #002244;" />
                  <MenuItem text="🚪 Deconnexion" onAction="#handleLogoutAction" style="-fx-font-size: 16px; -fx-text-fill: #002244;" />
               </items>
            </MenuButton>
         </HBox>
      </HBox>
   </top>

   <!-- Main Content in Center Region -->
   <center>
      <HBox alignment="CENTER" prefHeight="556.0" prefWidth="900.0" spacing="40">
         <!-- Image Section -->
         <VBox alignment="CENTER">
            <ImageView fitHeight="400.0" fitWidth="400.0" translateY="30.0">
               <image>
                  <Image url="@/img/pic7.png" />
               </image>
            </ImageView>
         </VBox>

         <!-- Form Section -->
         <VBox fx:id="mainBox" maxWidth="640.0" prefHeight="640.0" prefWidth="640.0" spacing="30" translateY="80.0" alignment="CENTER"
               style="-fx-background-color: linear-gradient(to bottom, #c2e4fb, #eff6ff); -fx-background-radius: 25; -fx-border-radius: 25; -fx-border-color: linear-gradient(to right, #001f4d, #003366); -fx-border-width: 1; -fx-padding: 30; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.2), 15, 0.3, 0, 5); -fx-font-family: 'Segoe UI', sans-serif;">
            <Label alignment="CENTER" text="🚗 Ajouter Offre"
                   style="-fx-font-size: 32px; -fx-font-weight: bold; -fx-text-fill: linear-gradient(to right, #001133, #003366); -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.15), 3, 0.3, 0, 2);" />
            <GridPane hgap="25" vgap="20" alignment="CENTER">
               <columnConstraints>
                  <ColumnConstraints percentWidth="50.0" />
                  <ColumnConstraints percentWidth="50.0" />
               </columnConstraints>
               <rowConstraints>
                  <RowConstraints vgrow="SOMETIMES" />
                  <RowConstraints vgrow="SOMETIMES" />
                  <RowConstraints vgrow="SOMETIMES" />
                  <RowConstraints vgrow="SOMETIMES" />
                  <RowConstraints vgrow="SOMETIMES" />
               </rowConstraints>
               <!-- Form Fields -->
               <VBox spacing="6" GridPane.columnIndex="0">
                  <Label text="📍 Départ *" style="-fx-font-weight: bold;" />
                  <TextField fx:id="departField" promptText="Ex: Tunis"
                             style="-fx-background-radius: 12; -fx-border-radius: 12; -fx-border-color: #003366; -fx-border-width: 1.5; -fx-padding: 8 12; -fx-background-color: white;" />
               </VBox>
               <VBox spacing="6" GridPane.columnIndex="1">
                  <Label text="📍 Destination *" style="-fx-font-weight: bold;" />
                  <TextField fx:id="destinationField" promptText="Ex: Sousse"
                             style="-fx-background-radius: 12; -fx-border-radius: 12; -fx-border-color: #003366; -fx-border-width: 1.5; -fx-padding: 8 12; -fx-background-color: white;" />
               </VBox>
               <VBox spacing="6" GridPane.columnIndex="0" GridPane.rowIndex="1">
                  <Label text="👥 Places *" style="-fx-font-weight: bold;" />
                  <TextField fx:id="placesField"
                             style="-fx-background-radius: 12; -fx-border-radius: 12; -fx-border-color: #003366; -fx-border-width: 1.5; -fx-padding: 8 12; -fx-background-color: white;" />
               </VBox>
               <VBox spacing="6" GridPane.columnIndex="1" GridPane.rowIndex="1">
                  <Label text="🚘 Matricule *" style="-fx-font-weight: bold;" />
                  <TextField fx:id="matriculeField"
                             style="-fx-background-radius: 12; -fx-border-radius: 12; -fx-border-color: #003366; -fx-border-width: 1.5; -fx-padding: 8 12; -fx-background-color: white;" />
               </VBox>
               <VBox spacing="6" GridPane.columnIndex="0" GridPane.columnSpan="2" GridPane.rowIndex="2">
                  <Label text="📅 Date et heure *" style="-fx-font-weight: bold;" />
                  <HBox spacing="12">
                     <DatePicker fx:id="datePicker"
                                 style="-fx-background-radius: 12; -fx-border-radius: 12; -fx-border-color: #003366; -fx-border-width: 1.5; -fx-padding: 6 12; -fx-background-color: white;" />
                     <TextField fx:id="timeField" promptText="HH:MM"
                                style="-fx-background-radius: 12; -fx-border-radius: 12; -fx-border-color: #003366; -fx-border-width: 1.5; -fx-padding: 8 12; -fx-background-color: white;" />
                  </HBox>
               </VBox>
               <VBox spacing="6" GridPane.columnIndex="0" GridPane.rowIndex="3">
                  <Label text="💰 Prix (DT) *" style="-fx-font-weight: bold;" />
                  <TextField fx:id="prixField"
                             style="-fx-background-radius: 12; -fx-border-radius: 12; -fx-border-color: #003366; -fx-border-width: 1.5; -fx-padding: 8 12; -fx-background-color: white;" />
               </VBox>
               <VBox spacing="6" GridPane.columnIndex="0" GridPane.columnSpan="2" GridPane.rowIndex="4">
                  <Label text="🖼️ Image véhicule *" style="-fx-font-weight: bold;" />
                  <HBox spacing="10">
                     <Button fx:id="uploadButton" text="📁 Choisir Image" onAction="#handleUploadAction"
                             style="-fx-background-color: linear-gradient(to right, #001f4d, #003366); -fx-text-fill: white; -fx-border-radius: 12; -fx-background-radius: 12; -fx-padding: 6 16; -fx-cursor: hand;" />
                     <Label fx:id="fileLabel" text="Aucune sélection" />
                  </HBox>
               </VBox>
            </GridPane>
            <HBox alignment="CENTER">
               <Button fx:id="submitButton" onAction="#ajouterOffreAction" text="💾 Enregistrer"
                       style="-fx-background-radius: 25; -fx-text-fill: white; -fx-font-size: 16px; -fx-font-weight: bold; -fx-padding: 10 25; -fx-background-color: linear-gradient(to right, #001f4d, #003366); -fx-cursor: hand; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.25), 8, 0.3, 0, 4);" />
            </HBox>
         </VBox>
      </HBox>
   </center>
</BorderPane>